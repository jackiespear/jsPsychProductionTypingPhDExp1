<!DOCTYPE html>
<html>
    <head>
        <title>Recognition Experiment</title>
        <meta name="author" content="Jackie Spear"/>
        <meta name="description" content="A psychology recognition memory experiment"/>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <script src="jspsych-6.3.1/jspsych.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-html-keyboard-response.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-external-html.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-survey-text.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-survey-html-form.js"></script>
        <script src="jspsych-6.3.1/plugins/jspsych-fullscreen.js"></script>
        <script src=https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.3.0/math.min.js></script> <!-- loading in math.js to use a matrix for randomization -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script src=https://cdnjs.cloudflare.com/ajax/libs/BrowserFS/2.0.0/browserfs.js></script>
        <script src=https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.21/jquery.csv.js></script>
        <script src=https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.21/jquery.csv.min.js></script>
        <script src='stimuli/exp_text.js'></script>
        <script src='stimuli/study_words_consist_practice.js'></script>
        <script src='stimuli/study_words_inconsist_practice.js'></script>
        <script src='stimuli/study_words_concrete.js'></script>
        <script src='stimuli/study_words_abstract.js'></script>
        <script src='stimuli/study_words_produce2.js'></script> 
        <script src='stimuli/study_words_read2.js'></script>
        <script src='stimuli/study_words_mixed1.js'></script>
        <script src='stimuli/study_words_mixed2.js'></script>
        <script src='stimuli/study_words_pure_produce.js'></script>
        <script src='stimuli/study_words_pure_read.js'></script>
        <script src='words.js'></script>

        <script src='stimuli/test_words.js'></script>
        <link href="jspsych-6.3.1/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    </head>
 
<script>

console.table(words);

var words1 = jsPsych.randomization.repeat(words, 1); //this will shuffle all the rows
console.table(words1);

function shuffle_variable (studywords_list) {
  for(i=0; i<studywords_list.length; i ++) {
    W1 = studywords_list[i].word1;
    W2 = studywords_list[i].word2;
    W3 = studywords_list[i].word3;
    WL = [W1, W2, W3];
    My_ord = jsPsych.randomization.repeat([0,1,2],1);

    studywords_list[i].word1 = WL[My_ord[0]];
    studywords_list[i].word2 = WL[My_ord[1]];
    studywords_list[i].word3 = WL[My_ord[2]];
  }
  return(studywords_list)
}
studywords = [];
studywords = shuffle_variable(words); //this will shuffle the columns
console.log(studywords);

studywords=jsPsych.randomization.repeat(studywords, 1); //this will shuffle the rows
console.log(studywords);
console.table(studywords);


console.log(studywords);
studywords2 = [];
studywords2 = studywords; 
console.table(studywords2);

const result = studywords2.map(({word1, word2})=>{
  let doc={word1, word2};
  return doc;
}); 

console.table(result); //This works!!!

var study_pairs = studywords.map(function(element) { //selecting the first two words to create the word pairs
  return [element.word1, element.word2];
})

//study_pairs = {...study_pairs, stimuli: 'word1'};
//console.table(study_pairs);

console.log(study_pairs);
console.table(study_pairs);

var new_study_pairs = Array.from(study_pairs, val => "word1:" + val);
console.table(new_study_pairs);



let output = [];
let tmp;
let tmp2;

for(let i = 0; i < study_pairs.length; i++){
  tmp = {"word1" : study_pairs[i][0]};
  output.push(tmp);
  for(let j = 0; j < study_pairs[i].length; j++){
    tmp2 = {"word2": study_pairs[j][1]};
    output.push(tmp2)
  }
}

console.log(output);
console.table(output);

for(let i=0; i < study_pairs.length; i++) { //for each element in the main array e.g. each word pair
    for (let j=0; j < study_pairs[i].length; j++){ // for each element in the innner array e.g. each individual word
        //statement for inner loop
        tmp2 = {"word1" : study_pairs[j][0]};
        output.push(tmp2);
       // output[i][j] = output.push(tmp, tmp2);
    }
    //statement for outerloop
    tmp = {"word2" : study_pairs[i][0]}; //misses 3rd word in word 2 (column 2) and triples 2nd word in 1st and 2nd word pair
    output.push(tmp);
}

console.log(output);
console.table(output);

for(let i=0; i < study_pairs.length; i++) { //for each element in the main array e.g. each word pair
    for (let j=0; j < study_pairs[i].length; j++){ // for each element in the innner array e.g. each individual word

      console.table(study_pairs[i][j]);
    }

} 

console.log(output);
console.table(output); 


let text = "";
for (let i = 0; 1 < study_pairs[0]; i++) {
  text += study_pairs[i] + "</span>";
 
}

console.log(text);
console.table(text);


var study_pairs = studywords.map(function(element) {
  return [element.word1, element.word2].join(" - ");
})

console.log(study_pairs);
console.table(study_pairs);



//studywords[2].pop();
//console.tabe(studywords);


//console.log(studywords);



</script>



<!-- Allow remote storage on Google Firebase -->
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.12.0/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.12.0/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.12.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.12.0/firebase-database.js"></script>

<!-- enter some javascript code-->
<script type="text/javascript">








  </script>
  </html>
